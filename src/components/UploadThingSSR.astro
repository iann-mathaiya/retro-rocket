---
import { extractRouterConfig } from "uploadthing/server"
import { uploadThingFileRouter } from "../../db/uploadthing"

/**
 * This you only need to do once in your app to enable
 * server side rendering of the uploadthing component.
 * No data will be fetched on the client.
 */
const routerConfig = extractRouterConfig(uploadThingFileRouter)
;(globalThis as any).__UPLOADTHING ??= routerConfig
---

<script define:vars={{ routerConfig }}>
  /**
   * Injecting config to the client. This prevents the client from fetching
   * the configuration from the server, since we already have it.
   */
  globalThis.__UPLOADTHING ??= routerConfig
</script>
