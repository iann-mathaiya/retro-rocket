---
import Logo from "../assets/logo.svg";
import { app } from "../firebase/server";
import { getAuth } from "firebase-admin/auth";
import RootLayout from "../layouts/RootLayout.astro";

const auth = getAuth(app);

const sessionCookie = Astro.cookies.get("__session")?.value;

if (!sessionCookie) {
    return Astro.redirect("/signin");
}

const decodedCookie = await auth.verifySessionCookie(sessionCookie);
const user = await auth.getUser(decodedCookie.uid);

if (!user) {
    return Astro.redirect("/signin");
}

const title = 'Products'
---

<RootLayout title={title}>
    <section class="w-full min-h-screen bg-gradient-to-br from-[#f8f9c7]/80 to-[#f0cd97]/80">
        <div class="mx-auto w-full max-w-screen-lg">
            <div class="p-4 flex items-center justify-between">
                <a href="/dashboard">
                    <Logo width={32} height={32} fill="currentColor" />
                </a>

                <div class="flex items-center justify-center gap-4">
                    <a href="/orders" class="text-sm text-gray-600 hover:text-orange-600">Orders</a>
                    <a href="/customers" class="text-sm text-gray-600 hover:text-orange-600">Customers</a>
                    <a href="/products" class="text-sm text-gray-600 hover:text-orange-600">Products</a>
                </div>
            </div>
        </div>
    </section>
</RootLayout>
